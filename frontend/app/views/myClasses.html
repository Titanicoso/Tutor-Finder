<script ng-src="/resources/js/jquery-3.3.1.min.js"></script>
<script ng-src="/resources/js/select2.min.js"></script>
<script ng-src="/resources/js/dropdownClick.js"></script>
<script ng-src="/resources/js/searchForm.js"></script>



<!-- <body class="body"> -->
<c:url value="/searchResults" var="postPath"/>
<!-- <div class="my-reservation"></div> -->

<div class="search-results w-100">
    <h3 class="search-data"><spring:message code="yourclassRequests" htmlEscape="true"/></h3>
    <c:if test="${reservations.size() == 0}">
        <h1><spring:message code="no.classRequests"/></h1>
    </c:if>
    <c:forEach var="reservation" items="${reservations}">
        <div class="reservation-course-result">
            <div class="search-result-img">
                <c:choose>
                    <c:when test="${reservation.status == 2}">
                        <div class="button-2 relative" type="submit">
                            <a class="class-button" ng-href="/approveClassRequest?classReservation=${reservation.classRequestId}"></a>
                            <spring:message code="Approve"/>
                        </div>
                        <div class="button-2 relative" type="submit">
                            <a class="class-button" ng-href="/denyClassRequest?classReservation=${reservation.classRequestId}"></a>
                            <spring:message code="Deny"/>
                        </div>
                    </c:when>
                    <c:otherwise>
                        <div class="button-2 relative" type="submit">
                            <a class="class-button" ng-href="/courseFiles?professor=${reservation.course.professor.id}&subject=${reservation.course.subject.id}"></a>
                            <spring:message code="files"/>
                        </div>
                    </c:otherwise>
                </c:choose>
            </div>
                <%--TODO: add buttons--%>
            <a class="search-result-title">
                <c:out value="${reservation.course.subject.area.name} - ${reservation.course.subject.name}" escapeXml="true" /></a>
            <a class="search-result-professor" >
                <spring:message code="reservation.student" arguments="${reservation.student.name}" htmlEscape="true" /></a>
            <a class="search-result-specs"><spring:message code="course.specs" arguments="${reservation.course.price}" htmlEscape="true" /></a>
            <a class="search-result-description"><spring:message code="reservation.day" arguments="${reservation.startDay},${reservation.startMonth},${reservation.startYear}" htmlEscape="true" /><br/><spring:message code="reservation.from" arguments="${reservation.startHour},${reservation.startMinutes}" htmlEscape="true" /><spring:message code="reservation.to"  arguments="${reservation.endHour},${reservation.endMinutes}" htmlEscape="true" /></a>
            <a class="search-result-status">
                <c:choose>
                    <c:when test="${reservation.status == 0}">
                        <spring:message code="reservation.accepted" htmlEscape="true" />
                    </c:when>
                    <c:when test="${reservation.status == 1}">
                        <spring:message code="reservation.canceled" htmlEscape="true" />
                    </c:when>
                    <c:otherwise>
                        <spring:message code="reservation.pending" htmlEscape="true" />
                    </c:otherwise>
                </c:choose>
            </a>
        </div>
    </c:forEach>

    <div class="paged-result-buttons">
        <c:url value="/reservations?page=${page - 1}" var="previous"/>
        <c:url value="/reservations?page=${page + 1}" var="next"/>

        <c:if test="${page > 1}">
            <a href="${previous}" class="previous round">&#8249;</a>
        </c:if>
        <c:if test="${hasNext}">
            <a href="${next}" class="next round">&#8250;</a>
        </c:if>
    </div>
</div>